<section class="{% if section.settings.media_layout == "left" %}d-flex align-items-center flex-row-reverse{% endif %}">
  <div id="main-carousel" class="splide" aria-label="My Awesome Gallery">
    <div class="splide__track">
      <ul class="splide__list">
        {% for image in product.images %}
          <li
            class="splide__slide overflow-hidden position-relative"
            {% if section.settings.image_zoom %}
              onmousemove="zoomImage(event)"
              onmouseleave="resetZoom(event)"
            {% endif %}
          >
            <img
              style="{% if section.settings.media_fit == "original" %}object-fit: contain;{% elsif section.settings.media_fit == "fill" %}object-fit: cover;{% endif %}"
              class="thumbnail-image"
              src="{{ image.src | img_url: '1080x' }}"
              alt=""
            >
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <ul
    style="
      {% if section.settings.media_layout == "left" %}gap: 0.5rem;
      margin-right: 1rem;flex-direction: column;{% endif %}
    "
    id="thumbnails"
    class="thumbnails"
  >
    {% for image in product.images %}
      <li class="thumbnail">
        <img src="{{ image.src | img_url: '250x' }}" alt="">
      </li>
    {% endfor %}
  </ul>
</section>

<script>
  function zoomImage(event) {
    const container = event.currentTarget;
    const image = container.querySelector('.thumbnail-image');
    
    const offsetX = (event.offsetX / container.offsetWidth) * 100;
    const offsetY = (event.offsetY / container.offsetHeight) * 100;
    
    image.style.transformOrigin = `${offsetX}% ${offsetY}%`;
    image.style.transform = 'scale(2)';
    image.style.cursor = "crosshair";
  }
  
  function resetZoom(event) {
    const container = event.currentTarget;
    const image = container.querySelector('.thumbnail-image');
    image.style.transform = 'scale(1)';
    image.style.cursor = "auto";
  }
</script>